<%- include ('../nav/header') %>
	<!-- Sidebar Page -->
	<%- include('../nav/sidebar') %>
	

	<div class="content-wrapper">
		<div class="col-lg-20 grid-margin stretch-card" id="table">
			<div class="card overflow-x overflow-y-hidden">
	<div class="card" id="newform">
	 <div class="card-body">
			<h4 class="card-title">Daily In-Out Report</h4>
				
				<form class="form-inline">
				  <label class="sr-only" for="contractor">Contractor</label>
				  <select class="form-control mb-2 mr-sm-2" name="contract_code_data" id="contract_code_data">
					<option value="">Select Contractor</option>
					<% contractor.forEach(function(contractordatas)  { %>
					
					<option value="<%= contractordatas.CCODE %>"><%= contractordatas.CCODE %></option>
					<% }) %>
				  </select>
				  <label class="sr-only" for="from_date">From Date</label>
				  <input type="date" class="form-control mb-2 mr-sm-2" id="from_date" name="from_date" placeholder="from date">
				  
				  <label class="sr-only" for="to_date">To Date</label>
				  
					<input type="date" class="form-control" id="to_date" name="to_date" placeholder="to date" >
				
				 
				  <button  class="btn btn-gradient-primary mb-2" onclick="get_contractor()">Go</button>
				</form>
			  </div>
	
			</div>
						
	  <div class="col-sm-12 text-right">
					
				 	   <div class="w3-show-inline-block">
  <div class="w3-bar"> 
					
					<button type="button" class="btn btn-gradient-info btn-icon-text" onclick="window.print();"> Print <i class="mdi mdi-printer btn-icon-append"></i>
					  </button>
					 
					 
					  <button type="button" class="btn btn-gradient-info btn-icon-text" onclick="window.excel();"> Excel <i class="mdi mdi-excel btn-icon-append"></i>
					  </button>
					</div>
					</div> 
  </div>

<table   class="table table-striped table-class">
  <thead>
	<tr>
		<th> # </th>			
		<th>Employee Code</th>
		<th>Employee Name</th>
		<th>Shift</th>
		<th>date</th>
		<th>IN</th>
		<th>Out</th>
		<th>Contractor Name</th>
		<th>Gate</th>
		<th>PO NUM</th>
	</tr>
</thead>
<tbody id='in_outdatas'>

</tbody>
</table>
</div>
</div>
</div>

	
		<!-- Footer Page-->
		<%- include('../nav/footer') %>
		
		<script>

		function get_contractor(){

			var contractor_code =document.getElementById("contract_code_data").value;
			var from_date =document.getElementById("from_date").value;
			var to_date =document.getElementById("to_date").value;
					//alert(contractor_code);
					////alert(from_date);
					//alert(to_date);
						$.ajax({
						type:'POST',
						data: { contractor_code: contractor_code,from_date: from_date,to_date: to_date },
						url:'/contractor_attendance',
						success: function(data){
							//console.log(data);
						//	$('#in_outdatas').empty();
						$.each(data, function(index, attendancedetails) {
								$('#in_outdatas').append('<tr><td>' + attendancedetails.EMPCODE+ '</td><td>' + attendancedetails.Employee_Name + '</td><td>' + attendancedetails.Shift + '</td><td>' + attendancedetails.Shift_date + '</td><td>' + attendancedetails.IN + '</td><td>' + attendancedetails.Out + '</td><td>' + attendancedetails.CNAME + '</td><td>' + attendancedetails.Gate + '</td><td>' + attendancedetails.PO_NUM + '</td></tr>');
							});
						}
					}); 
		
			}
		</script>
		